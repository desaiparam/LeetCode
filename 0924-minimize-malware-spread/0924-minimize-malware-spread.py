class Solution:
    def minMalwareSpread(self, graph: List[List[int]], initial: List[int]) -> int:
        n = len(graph)
        colors = [-1] * n
        cl = 0
        def dfs(i,cl):
            if colors[i] != -1:
                return 
            colors[i] = cl
            for j in range(n):
                if i == j:
                    continue
                if graph[i][j] == 1:
                    dfs(j,cl)
        for i in range(n):
            dfs(i,cl)
            cl += 1
        grp = [0] * n
        for i in colors:
            grp[i] += 1
        infected = [0] * cl 
        for i in initial:
            infected[colors[i]] += 1
        res = float('inf')
        for i in initial:
            if infected[colors[i]] == 1:
                if res == float('inf'):
                    res = i
                elif grp[colors[i]] > grp[colors[res]]:
                    res = i
                elif grp[colors[i]] == grp[colors[res]]:
                    res = min(res,i)
        if res == float('inf'):
            res = min(initial)
        return res



        